@import "tailwindcss";

/* ── Reset & Base ─────────────────────────────────── */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

/* ═══════════════════════════════════════════════════════
   DESIGN TOKENS  — edit palettes here, everything adapts
   ═══════════════════════════════════════════════════════

   PALETTE A — Dark  (slate-navy, default)
   PALETTE B — Light (warm ivory)

   Shared tokens (accent, radius, spacing, type-scale)
   are defined once under :root and never duplicated.
═══════════════════════════════════════════════════════ */

:root {
  /* ── Fonts ─────────────────────────────────────── */
  --font-sans:  var(--font-inter), system-ui, sans-serif;
  --font-serif: var(--font-playfair), Georgia, serif;
  --font-mono:  'Fira Code', 'Menlo', monospace;

  /* ── PALETTE A : Dark (slate-navy) ─────────────── */
  /* backgrounds */
  --bg:       #16181f;   /* page canvas — deep slate, NOT pure black */
  --bg2:      #1e2029;   /* subtle alternate bg (e.g. code area) */
  /* surfaces (cards, sidebar, header) */
  --surface:  #1e2029;
  --surface2: #262933;
  /* borders */
  --border:   #2e3140;
  --border2:  #3a3e50;
  /* header */
  --header-bg:     rgba(22,24,31,.88);
  --header-border: rgba(255,255,255,.06);
  /* text */
  --text:    #eef0f5;    /* primary — soft white, easy on eyes */
  --text2:   #b0b4c4;   /* secondary */
  --text3:   #6b718a;   /* muted / labels */

  /* ── PALETTE B : Light (warm ivory) ───────────── */
  /* defined in html[data-theme="light"] below */

  /* ── Accent (same in both themes) ─────────────── */
  --accent:       #f97316;
  --accent-hover: #fb923c;
  --accent-deep:  #ea580c;
  --accent-glow:  rgba(249,115,22,.18);
  --accent-dim:   rgba(249,115,22,.10);
  --accent2:      #e879f9;   /* secondary pop — purple-pink */

  /* ── Radius scale ──────────────────────────────── */
  --radius-sm: clamp(4px,  .35vw, 8px);
  --radius:    clamp(8px,  .70vw, 16px);
  --radius-lg: clamp(12px, 1vw,   24px);

  /* ── Spacing scale ─────────────────────────────── */
  --space-xs: clamp(.30rem,  .50vw,  .60rem);
  --space-sm: clamp(.60rem, 1.00vw, 1.10rem);
  --space-md: clamp(1.00rem, 2.00vw, 2.00rem);
  --space-lg: clamp(1.50rem, 3.00vw, 3.50rem);
  --space-xl: clamp(2.00rem, 4.00vw, 5.00rem);

  /* ── Type scale ────────────────────────────────── */
  --text-xs:   clamp(.60rem,  .70vw,  .80rem);
  --text-sm:   clamp(.72rem,  .85vw,  .95rem);
  --text-base: clamp(.875rem, 1.00vw, 1.05rem);
  --text-lg:   clamp(1.00rem, 1.20vw, 1.30rem);
  --text-xl:   clamp(1.20rem, 1.60vw, 1.80rem);
  --text-2xl:  clamp(1.50rem, 2.20vw, 2.40rem);
  --text-3xl:  clamp(1.80rem, 3.50vw, 3.40rem);

  /* ── Code ─────────────────────────────────────── */
  --code-fg: #a6e3a1;           /* mint green on dark bg */
  --code-bg: #262933;           /* = surface2 in dark */

  /* ── Gradient palette (card accent rotation) ──── */
  --grad-rose:    linear-gradient(135deg, #f43f5e, #fb923c);   /* rose → orange */
  --grad-violet:  linear-gradient(135deg, #a855f7, #6366f1);   /* violet → indigo */
  --grad-teal:    linear-gradient(135deg, #2dd4bf, #3b82f6);   /* teal → blue */
  --grad-amber:   linear-gradient(135deg, #fbbf24, #f97316);   /* amber → orange */

  /* card rotation — 4 slots */
  --card-c1: #f43f5e;
  --card-c2: #a855f7;
  --card-c3: #2dd4bf;
  --card-c4: #fbbf24;

  /* hero gradient used on featured post */
  --hero-grad: linear-gradient(135deg, #a855f7 0%, #6366f1 40%, #2dd4bf 100%);

  /* ── Layout ────────────────────────────────────── */
  --max-content: clamp(480px, 58vw, 760px);
  --max-wide:    clamp(600px, 88vw, 1600px);
}

/* ── PALETTE B : Light (warm ivory) ──────────────── */
html[data-theme="light"] {
  /* backgrounds */
  --bg:       #f7f6f2;   /* warm ivory, NOT glaring white */
  --bg2:      #eeecea;   /* slightly deeper warm tone */
  /* surfaces */
  --surface:  #ffffff;
  --surface2: #ede9e3;
  /* borders */
  --border:   #d8d3cb;
  --border2:  #e8e4de;
  /* header */
  --header-bg:     rgba(247,246,242,.92);
  --header-border: rgba(0,0,0,.08);
  /* text */
  --text:    #1a1a1a;
  --text2:   #4a4a55;
  --text3:   #8a8a9a;
  /* accent overrides (slightly deeper in light for contrast) */
  --accent:       #ea580c;
  --accent-hover: #f97316;
  --accent-deep:  #c2410c;
  --accent-glow:  rgba(234,88,12,.15);
  --accent-dim:   rgba(234,88,12,.08);
  --accent2:      #c026d3;
  /* accent overrides are already above; gradients are theme-neutral */
  /* ── Code ─────────────────────────────────────── */
  --code-fg: #ffffff;           /* white on violet pill */
  --code-bg: #6366f1;           /* indigo — unmistakable on ivory */
}

html { background: var(--bg); color: var(--text); scroll-behavior: smooth; }
body {
  background: var(--bg);
  color: var(--text);
  font-family: var(--font-sans);
  font-size: var(--text-base);
  line-height: 1.6;
  min-height: 100vh;
  -webkit-font-smoothing: antialiased;
  transition: background-color .3s, color .3s;
}
a { color: inherit; text-decoration: none; }
img { display: block; }

/* ─────────────────────────────────────────────────────
   HEADER
───────────────────────────────────────────────────── */
.site-header {
  position: sticky; top: 0; z-index: 100;
  background: var(--header-bg);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  border-bottom: 1px solid var(--header-border);
}
.header-inner {
  max-width: var(--max-wide); margin: 0 auto;
  padding: 0 var(--space-md);
  height: clamp(48px, 5.5vh, 72px);
  display: flex; align-items: center; justify-content: space-between;
}

/* ─────────────────────────────────────────────────────
   FLOATING SOCIAL SIDEBAR
───────────────────────────────────────────────────── */
.social-sidebar {
  position: fixed;
  left: clamp(.75rem, 2vw, 2.5rem);
  bottom: clamp(4rem, 8vh, 7rem);
  z-index: 90;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: clamp(1rem, 1.8vh, 1.6rem);
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: clamp(.75rem, 1.4vh, 1.2rem) clamp(.6rem, 1vw, 1rem);
  box-shadow: 0 clamp(4px, .8vh, 10px) clamp(16px, 3vw, 32px) rgba(0,0,0,.35);
  backdrop-filter: blur(12px);
}
.social-sidebar .social-icon-link svg {
  width: clamp(15px, 1.3vw, 22px);
  height: clamp(15px, 1.3vw, 22px);
}
.social-sidebar-line {
  display: none;
}
.back-link {
  display: inline-flex; align-items: center; gap: var(--space-xs);
  font-size: var(--text-sm); font-weight: 500; letter-spacing: .02em;
  color: var(--text3); transition: color .2s;
}
.back-link svg {
  width: clamp(12px, 1vw, 16px);
  height: clamp(12px, 1vw, 16px);
  opacity: .6; transition: transform .2s;
}
.back-link:hover { color: var(--text2); }
.back-link:hover svg { transform: translateX(-3px); opacity: 1; }
.blog-brand { display: flex; align-items: center; }
.blog-brand-ky {
  font-family: var(--font-serif);
  font-size: var(--text-xl); font-weight: 700;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  background-clip: text;
}
.blog-brand-dot { color: var(--text3); margin: 0 .2em; font-size: var(--text-lg); }
.blog-brand-text { font-size: var(--text-sm); font-weight: 600; letter-spacing: .1em; text-transform: uppercase; color: var(--text3); }

/* Social icon links */
.social-icon-link {
  display: inline-flex; align-items: center; justify-content: center;
  color: var(--text3);
  transition: color .2s, transform .2s;
}
.social-icon-link:hover { color: var(--accent); transform: translateY(-2px); }

/* Theme Toggle */
.theme-toggle {
  background: none;
  border: 1px solid var(--border);
  border-radius: 999px;
  width: clamp(28px, 2.2vw, 40px);
  height: clamp(28px, 2.2vw, 40px);
  display: inline-flex; align-items: center; justify-content: center;
  cursor: pointer;
  color: var(--text3);
  transition: color .2s, border-color .2s, background .2s;
  flex-shrink: 0;
}
.theme-toggle:hover {
  color: var(--accent);
  border-color: var(--accent);
  background: var(--accent-dim);
}
.theme-toggle svg {
  width: clamp(12px, 1vw, 18px);
  height: clamp(12px, 1vw, 18px);
}

/* ─────────────────────────────────────────────────────
   FOOTER
───────────────────────────────────────────────────── */
.site-footer { margin-top: var(--space-xl); border-top: 1px solid var(--border); padding: var(--space-lg) var(--space-md); }
.footer-inner {
  max-width: var(--max-wide); margin: 0 auto;
  display: flex; flex-direction: column; align-items: center; gap: var(--space-xs);
}
.footer-name { font-family: var(--font-serif); font-size: var(--text-base); color: var(--text2); }
.footer-copy { font-size: var(--text-xs); color: var(--text3); }

/* ─────────────────────────────────────────────────────
   POST LIST PAGE
───────────────────────────────────────────────────── */
.posts-page { max-width: var(--max-wide); margin: 0 auto; padding: var(--space-xl) var(--space-md) calc(var(--space-xl) * 1.5); }

.posts-intro { margin-bottom: var(--space-lg); }
.posts-intro-hero {
  display: flex; align-items: flex-start; gap: var(--space-md);
}
.posts-intro-avatar {
  width: clamp(88px, 10vw, 160px);
  height: clamp(88px, 10vw, 160px);
  border-radius: 50%; object-fit: cover;
  border: 3px solid var(--border2);
  flex-shrink: 0; margin-top: 4px;
  box-shadow: 0 0 0 6px var(--accent-dim);
}
.posts-intro-text { display: flex; flex-direction: column; }
.posts-intro-eyebrow {
  display: inline-flex; align-items: center; gap: var(--space-xs);
  font-size: var(--text-xs); font-weight: 700; letter-spacing: .14em; text-transform: uppercase;
  color: var(--accent); margin-bottom: var(--space-sm);
}
.posts-intro-eyebrow::before { content: ''; display: block; width: 20px; height: 1px; background: var(--accent); }
.posts-intro h1 {
  font-family: var(--font-serif);
  font-size: clamp(2rem, 4vw, 3rem);
  font-weight: 700; line-height: 1.15; margin-bottom: var(--space-xs);
  padding-bottom: 0.15em; /* prevent gradient clip cutting descenders (g, y, p) */
  background: var(--hero-grad);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}
.posts-intro-tagline { font-size: var(--text-lg); color: var(--text2); line-height: 1.6; }
.posts-intro-sub { font-size: var(--text-base); color: var(--text2); max-width: 50ch; }

/* Featured post */
.post-featured {
  display: grid; grid-template-columns: 1fr 1fr;
  background: var(--surface); border: 1px solid var(--border);
  border-radius: var(--radius-lg); overflow: hidden;
  margin-bottom: var(--space-lg); color: inherit; text-decoration: none;
  transition: border-color .25s, box-shadow .25s;
  position: relative;
}
.post-featured::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: var(--radius-lg);
  background: var(--hero-grad);
  opacity: 0;
  transition: opacity .35s;
  pointer-events: none;
  z-index: 0;
}
.post-featured > * { position: relative; z-index: 1; }
.post-featured:hover::before { opacity: .07; }
.post-featured:hover {
  border-color: #a855f7;
  box-shadow: 0 0 0 1px #a855f780, 0 24px 60px rgba(0,0,0,.45);
}
.post-featured-image { position: relative; aspect-ratio: 4/3; overflow: hidden; background: var(--surface2); }
.post-featured-image img { transition: transform .5s ease; width: 100%; height: 100%; object-fit: cover; }
.post-featured:hover .post-featured-image img { transform: scale(1.04); }
.post-featured-body {
  padding: var(--space-lg); display: flex; flex-direction: column; justify-content: center; gap: var(--space-sm);
}
.post-featured-label {
  font-size: var(--text-xs); font-weight: 700; letter-spacing: .14em; text-transform: uppercase;
  background: var(--hero-grad);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  display: inline-block;
}
.post-featured-title {
  font-family: var(--font-serif);
  font-size: var(--text-2xl);
  font-weight: 700; line-height: 1.25; color: var(--text);
}
.post-featured-excerpt {
  font-size: var(--text-sm); color: var(--text2); line-height: 1.7;
  display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden;
}
.post-featured-meta { font-size: var(--text-xs); color: var(--text3); display: flex; gap: var(--space-xs); flex-wrap: wrap; }
.post-featured-read {
  display: inline-flex; align-items: center; gap: var(--space-xs);
  font-size: var(--text-sm); font-weight: 600; color: var(--accent); margin-top: .25rem;
  transition: gap .2s;
}
.post-featured:hover .post-featured-read { gap: var(--space-sm); }

/* Section divider */
/* Filter bar */
.posts-filter-bar {
  display: flex; flex-direction: column;
  gap: var(--space-sm); margin-bottom: var(--space-lg);
}
/* On wider screens: search + pills sit on the same row */
@media (min-width: 640px) {
  .posts-filter-bar { flex-direction: row; flex-wrap: wrap; align-items: center; }
}
.posts-search-wrap {
  position: relative; display: flex; align-items: center;
  width: 100%;
}
@media (min-width: 640px) {
  .posts-search-wrap { flex: 1 1 220px; min-width: 0; }
}
.posts-search-icon {
  position: absolute; left: 14px; width: 16px; height: 16px;
  color: var(--text3); pointer-events: none; flex-shrink: 0;
}
.posts-search {
  width: 100%; padding: 0.75rem 2.6rem 0.75rem 2.6rem;
  background: var(--surface);
  border: 1.5px solid var(--border);
  border-radius: var(--radius);
  color: var(--text);
  font-size: var(--text-sm); outline: none;
  transition: border-color .2s, box-shadow .2s;
  box-shadow: 0 1px 4px rgba(0,0,0,.06);
}
@media (min-width: 640px) {
  .posts-search { font-size: var(--text-sm); padding: 0.7rem 2.6rem; }
}
.posts-search::placeholder { color: var(--text3); }
.posts-search:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px var(--accent-dim), 0 2px 8px rgba(0,0,0,.08);
}
html[data-theme="light"] .posts-search {
  background: #ffffff;
  border-color: #d8d3cb;
  box-shadow: 0 1px 6px rgba(0,0,0,.07);
}
html[data-theme="light"] .posts-search:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px var(--accent-dim), 0 2px 8px rgba(0,0,0,.06);
}
.posts-search-clear {
  position: absolute; right: 10px; background: none; border: none;
  color: var(--text3); font-size: 1.1rem; cursor: pointer; line-height: 1;
  padding: 2px 4px; transition: color .15s;
}
.posts-search-clear:hover { color: var(--text); }
/* Pills: scrollable row on mobile, wrapping on desktop */
.posts-categories {
  display: flex; gap: var(--space-xs);
  overflow-x: auto; -webkit-overflow-scrolling: touch;
  padding-bottom: 4px;
  scrollbar-width: none;
}
.posts-categories::-webkit-scrollbar { display: none; }
@media (min-width: 640px) {
  .posts-categories { flex-wrap: wrap; overflow-x: visible; padding-bottom: 0; }
}
.posts-cat-btn {
  padding: 0.4rem 1rem; border-radius: 999px;
  border: 1px solid var(--border); background: var(--surface);
  color: var(--text2); font-size: var(--text-xs); font-weight: 600;
  white-space: nowrap; flex-shrink: 0;
  cursor: pointer; transition: border-color .2s, color .2s, background .2s;
  letter-spacing: .04em;
}
.posts-cat-btn:hover { border-color: var(--accent); color: var(--accent); }
.posts-cat-btn.active { background: var(--accent); border-color: var(--accent); color: #fff; }

/* Filter icon button + dropdown */
.posts-filter-wrap { position: relative; flex-shrink: 0; }
.posts-filter-pill {
  display: inline-flex; align-items: center; gap: 6px;
  padding: 0.6rem 0.9rem; border-radius: 999px;
  border: 1.5px solid var(--border); background: var(--surface);
  color: var(--text2); font-size: var(--text-sm); font-weight: 500;
  cursor: pointer; white-space: nowrap;
  transition: border-color .2s, color .2s, background .2s;
}
.posts-filter-pill:hover { border-color: var(--accent); color: var(--text); }
.posts-filter-pill.open { border-color: var(--accent); color: var(--text); }
html[data-theme="light"] .posts-filter-pill { background: #ffffff; border-color: #d8d3cb; }
html[data-theme="light"] .posts-filter-pill:hover,
html[data-theme="light"] .posts-filter-pill.open { border-color: var(--accent); }
.posts-filter-dropdown {
  position: absolute; top: calc(100% + 8px); left: 0;
  min-width: 190px; z-index: 50;
  background: var(--surface); border: 1.5px solid var(--border);
  border-radius: var(--radius-lg);
  box-shadow: 0 8px 28px rgba(0,0,0,.16);
  overflow: hidden; padding: 4px 0;
}
html[data-theme="light"] .posts-filter-dropdown {
  background: #ffffff; border-color: #d8d3cb;
  box-shadow: 0 8px 24px rgba(0,0,0,.1);
}
.posts-filter-dropdown-header {
  padding: 0.55rem 1rem 0.35rem;
  font-size: var(--text-xs); font-weight: 700; text-transform: uppercase;
  letter-spacing: .1em; color: var(--text3);
  border-bottom: 1px solid var(--border); margin-bottom: 4px;
}
.posts-filter-clearall {
  display: block; width: 100%;
  padding: 0.45rem 1rem; text-align: left;
  background: none; border: none; border-bottom: 1px solid var(--border);
  cursor: pointer; font-size: var(--text-xs); color: var(--accent);
  font-weight: 600; margin-bottom: 4px;
}
.posts-filter-clearall:hover { background: var(--surface2); }
.posts-filter-item {
  display: flex; align-items: center; gap: 10px; width: 100%;
  padding: 0.55rem 1rem; background: none; border: none;
  text-align: left; cursor: pointer;
  font-size: var(--text-sm); color: var(--text2);
  transition: background .12s;
}
.posts-filter-item:hover { background: var(--surface2); }
.posts-filter-item.selected { color: var(--text); font-weight: 500; }
/* Radio (time) */
.posts-radio {
  width: 18px; height: 18px; flex-shrink: 0; border-radius: 50%;
  border: 2px solid var(--border2); background: var(--surface2);
  display: flex; align-items: center; justify-content: center;
  transition: border-color .15s;
}
.posts-filter-item.selected .posts-radio { border-color: var(--accent); }
.posts-radio-dot {
  width: 8px; height: 8px; border-radius: 50%;
  background: var(--accent); display: block;
}
/* Checkbox (category) */
.posts-checkbox {
  width: 18px; height: 18px; flex-shrink: 0; border-radius: 5px;
  border: 2px solid var(--border2); background: var(--surface2);
  display: flex; align-items: center; justify-content: center;
  transition: background .15s, border-color .15s; color: #fff;
}
.posts-filter-item.selected .posts-checkbox { background: var(--accent); border-color: var(--accent); }
.posts-filter-count {
  font-size: var(--text-xs); color: var(--text3);
  letter-spacing: .06em; margin-bottom: var(--space-md);
}

/* Section divider */
.posts-section-header { display: flex; align-items: center; gap: var(--space-sm); margin-bottom: var(--space-md); }
.posts-section-header h2 { font-size: var(--text-xs); font-weight: 700; letter-spacing: .14em; text-transform: uppercase; color: var(--text3); white-space: nowrap; }
.posts-section-header::after { content: ''; flex: 1; height: 1px; background: var(--border); }

/* Post grid */
.posts-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(clamp(240px, 25vw, 380px), 1fr)); gap: var(--space-md); }

.post-card {
  background: var(--surface); border: 1px solid var(--border);
  border-radius: var(--radius); overflow: hidden;
  display: flex; flex-direction: column;
  transition: border-color .25s, transform .25s, box-shadow .25s;
  color: inherit; text-decoration: none;
  position: relative;
}
/* Colored top-strip — cycles through 4 gradient colors */
.post-card::before {
  content: '';
  display: block;
  height: 3px;
  width: 100%;
  flex-shrink: 0;
}
.post-card:nth-child(4n+1)::before { background: var(--grad-rose); }
.post-card:nth-child(4n+2)::before { background: var(--grad-violet); }
.post-card:nth-child(4n+3)::before { background: var(--grad-teal); }
.post-card:nth-child(4n+0)::before { background: var(--grad-amber); }
.post-card:hover {
  border-color: transparent;
  transform: translateY(-5px);
  box-shadow: 0 16px 40px rgba(0,0,0,.35);
}
.post-card:nth-child(4n+1):hover { box-shadow: 0 16px 40px rgba(244,63,94,.18); }
.post-card:nth-child(4n+2):hover { box-shadow: 0 16px 40px rgba(168,85,247,.18); }
.post-card:nth-child(4n+3):hover { box-shadow: 0 16px 40px rgba(45,212,191,.18); }
.post-card:nth-child(4n+0):hover { box-shadow: 0 16px 40px rgba(251,191,36,.18); }
.post-cover-wrapper { position: relative; aspect-ratio: 16/9; overflow: hidden; background: var(--surface2); flex-shrink: 0; }
.post-cover-wrapper img { transition: transform .5s ease; }
.post-card:hover .post-cover-wrapper img { transform: scale(1.05); }
.post-cover-placeholder {
  width: 100%; height: 100%;
  background: var(--hero-grad);
  display: flex; align-items: center; justify-content: center;
  position: relative;
  overflow: hidden;
}
/* subtle radial vignette over gradient */
.post-cover-placeholder::after {
  content: '';
  position: absolute; inset: 0;
  background: radial-gradient(ellipse at 30% 40%, rgba(255,255,255,.12) 0%, transparent 65%);
  pointer-events: none;
}
.post-cover-initial {
  font-family: var(--font-serif);
  font-size: clamp(3rem, 8vw, 6rem);
  font-weight: 700;
  color: rgba(255,255,255,.85);
  line-height: 1;
  text-transform: uppercase;
  position: relative;
  z-index: 1;
  text-shadow: 0 4px 24px rgba(0,0,0,.25);
}
.post-card-body { padding: var(--space-md); display: flex; flex-direction: column; gap: var(--space-xs); flex: 1; }
.post-tags { display: flex; flex-wrap: wrap; gap: var(--space-xs); }
.post-tag {
  font-size: var(--text-xs); font-weight: 700; letter-spacing: .1em; text-transform: uppercase;
  padding: .18em .55em; border-radius: var(--radius-sm);
  background: var(--hero-grad); color: #fff; border: none;
}
.post-meta { font-size: var(--text-xs); color: var(--text3); }
.post-card-title {
  font-size: var(--text-base); font-weight: 700; line-height: 1.4; color: var(--text);
  display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;
}
.post-card-excerpt {
  font-size: var(--text-sm); color: var(--text2); line-height: 1.65; flex: 1;
  display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;
}
.post-card-footer {
  display: flex; align-items: center; justify-content: space-between;
  margin-top: var(--space-sm); padding-top: var(--space-sm); border-top: 1px solid var(--border);
}
.post-read-more {
  font-size: var(--text-xs); font-weight: 600; color: var(--accent);
  display: flex; align-items: center; gap: var(--space-xs); transition: gap .2s;
}
.post-card:hover .post-read-more { gap: var(--space-sm); }

.posts-empty { text-align: center; padding: var(--space-xl) 0; color: var(--text3); }

/* ─────────────────────────────────────────────────────
   SINGLE POST PAGE
───────────────────────────────────────────────────── */
.post-hero-section {
  position: relative; width: 100%;
  aspect-ratio: 21/9; min-height: clamp(180px, 22vh, 320px); max-height: clamp(300px, 40vh, 560px);
  overflow: hidden; background: var(--surface);
}
.post-hero-section img { width: 100%; height: 100%; object-fit: cover; }
.post-hero-overlay {
  position: absolute; inset: 0;
  background: linear-gradient(to top, rgba(12,12,12,.96) 0%, rgba(12,12,12,.5) 55%, rgba(12,12,12,.1) 100%);
}
.post-hero-header {
  position: absolute; bottom: 0; left: 0; right: 0;
  max-width: var(--max-content); margin: 0 auto; padding: var(--space-lg) var(--space-md);
}
.post-header-tags { display: flex; flex-wrap: wrap; gap: var(--space-xs); margin-bottom: var(--space-sm); }
.post-header-tag {
  font-size: var(--text-xs); font-weight: 700; letter-spacing: .1em; text-transform: uppercase;
  padding: .2em .55em; border-radius: var(--radius-sm);
  background: var(--hero-grad); color: #fff; border: none;
  backdrop-filter: blur(8px);
}
.post-header-title {
  font-family: var(--font-serif);
  font-size: clamp(1.6rem, 4.5vw, 3.8rem);
  font-weight: 800;
  font-style: italic;
  line-height: 1.1;
  letter-spacing: -.025em;
  color: #fff;
  text-shadow: 0 2px 32px rgba(0,0,0,.7);
  /* accent gradient on italics for visual rhythm */
  background: linear-gradient(135deg, #fff 60%, rgba(249,115,22,.85) 100%);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* No-image header */
.post-header-plain {
  max-width: var(--max-content); margin: 0 auto;
  padding: var(--space-xl) var(--space-md) var(--space-md); border-bottom: 1px solid var(--border);
}
.post-header-plain .post-header-tags { margin-bottom: var(--space-sm); }
.post-header-plain .post-header-title {
  color: var(--text); text-shadow: none;
  background: none; -webkit-background-clip: unset;
  -webkit-text-fill-color: unset; background-clip: unset;
}

/* Meta row (author, date) */
.post-meta-row {
  display: flex; align-items: center; gap: var(--space-sm); flex-wrap: wrap;
  margin-top: var(--space-md); font-size: var(--text-sm); color: var(--text3);
}
.post-author-pill {
  display: inline-flex; align-items: center; gap: var(--space-xs);
  background: var(--surface2); border: 1px solid var(--border);
  padding: .28em .7em .28em .28em; border-radius: 999px;
}
.post-author-avatar { width: clamp(18px, 1.8vw, 28px); height: clamp(18px, 1.8vw, 28px); border-radius: 50%; object-fit: cover; }
.post-author-name { font-weight: 600; color: var(--text2); font-size: var(--text-xs); }
.post-meta-sep { color: var(--border2); }

/* Post body wrapper */
.post-page { max-width: var(--max-content); margin: 0 auto; padding: 0 var(--space-md) var(--space-xl); }
.post-back-row { padding: var(--space-md) 0; }
.post-back {
  display: inline-flex; align-items: center; gap: var(--space-xs);
  font-size: var(--text-sm); font-weight: 500; color: var(--text3); transition: color .2s;
}
.post-back svg { transition: transform .2s; }
.post-back:hover { color: var(--accent); }
.post-back:hover svg { transform: translateX(-3px); }

/* PortableText body */
.post-body { line-height: 1.85; font-size: var(--text-base); color: var(--text2); margin-top: var(--space-lg); text-align: left; }
.post-body p { margin-bottom: var(--space-md); text-align: left; hyphens: none; }
/* Drop-cap on the very first paragraph */
.post-body > p:first-of-type::first-letter {
  float: left;
  font-family: var(--font-serif);
  font-size: 4.2em;
  font-weight: 800;
  font-style: italic;
  line-height: 0.78;
  margin: 0.06em 0.1em 0 0;
  background: var(--hero-grad);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}
.post-body h1, .post-body h2, .post-body h3 { color: var(--text); font-family: var(--font-serif); }
.post-body h1 { font-size: clamp(1.4rem, 2.5vw, 2rem); margin: var(--space-lg) 0 var(--space-sm); line-height: 1.25; }
.post-body h2 { font-size: clamp(1.15rem, 2vw, 1.6rem); margin: var(--space-lg) 0 var(--space-sm); padding-bottom: var(--space-xs); border-bottom: 1px solid var(--border); }
.post-body h3 { font-size: clamp(1rem, 1.5vw, 1.25rem); margin: var(--space-md) 0 var(--space-xs); }
.post-body blockquote {
  border-left: 3px solid var(--accent); padding: var(--space-sm) var(--space-md);
  margin: var(--space-md) 0; background: var(--surface);
  border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
  color: var(--text2); font-style: italic;
}
.post-body ul, .post-body ol { margin: var(--space-sm) 0 var(--space-md) var(--space-md); }
.post-body li { margin-bottom: var(--space-xs); }
.post-body a { color: var(--accent); text-decoration: underline; text-underline-offset: 3px; }
.post-body a:hover { color: var(--accent2); }
.post-body code {
  font-family: var(--font-mono);
  background: var(--code-bg); color: var(--code-fg);
  padding: .15em .45em; border-radius: var(--radius-sm);
  font-size: .87em; border: 1px solid var(--border);
}
.post-body pre {
  background: #0a0a12; border: 1px solid var(--border);
  padding: var(--space-md); border-radius: var(--radius);
  overflow-x: auto; margin: var(--space-md) 0;
}
.post-body pre code { background: none; border: none; padding: 0; color: #cdd6f4; }
.post-body figure { margin: var(--space-lg) 0; }
.post-body figure img { width: 100%; border-radius: var(--radius); border: 1px solid var(--border); }
.post-body figcaption { text-align: center; font-size: var(--text-xs); color: var(--text3); margin-top: var(--space-xs); font-style: italic; }
.post-body hr { border: none; border-top: 1px solid var(--border); margin: var(--space-lg) 0; }

/* Footer nav */
.post-footer-nav { padding-top: var(--space-lg); margin-top: var(--space-lg); border-top: 1px solid var(--border); }
.post-footer-back {
  display: inline-flex; align-items: center; gap: var(--space-xs);
  font-size: var(--text-sm); font-weight: 600;
  padding: var(--space-xs) var(--space-md); border-radius: 999px;
  border: 1px solid var(--border2); color: var(--text2);
  transition: border-color .2s, color .2s;
}
.post-footer-back:hover { border-color: var(--accent); color: var(--accent); }

/* ─────────────────────────────────────────────────────
   3-COLUMN POST LAYOUT
───────────────────────────────────────────────────── */
.post-layout {
  display: grid;
  grid-template-columns: clamp(160px, 15vw, 210px) 1fr clamp(200px, 19vw, 270px);
  grid-template-areas: "toc content sidebar";
  grid-template-rows: auto;
  gap: clamp(1.5rem, 3vw, 2.5rem);
  max-width: var(--max-wide);
  width: 100%;
  margin: 0 auto;
  padding: var(--space-lg) var(--space-md) var(--space-xl);
  align-items: start;
  box-sizing: border-box;
}

/* grid children — block + overflow guard */
.post-toc-col {
  grid-area: toc;
  display: block;
  min-width: 0;
  overflow: hidden;
}
.post-content-col {
  grid-area: content;
  display: block;
  min-width: 0;
}
.post-sidebar-col {
  grid-area: sidebar;
  display: block;
  min-width: 0;
}

/* ── Article header (inside center col) ── */
.post-back-row { margin-bottom: var(--space-md); }
.post-back {
  font-size: var(--text-xs);
  color: var(--text3);
  text-decoration: none;
  transition: color .15s;
}
.post-back:hover { color: var(--accent); }

.post-article-header {
  margin-bottom: var(--space-lg);
  padding-bottom: var(--space-md);
  border-bottom: 1px solid var(--border);
}
.post-article-title {
  font-size: clamp(1.6rem, 3.2vw, 2.5rem);
  font-weight: 800;
  line-height: 1.2;
  letter-spacing: -.02em;
  color: var(--text);
  margin: var(--space-sm) 0 var(--space-md);
}

/* ── Table of Contents ── */
.post-toc {
  position: sticky;
  top: clamp(60px, 7vh, 88px);
  display: block;
}
.toc-label {
  font-size: .68rem;
  font-weight: 700;
  letter-spacing: .12em;
  text-transform: uppercase;
  color: var(--text3);
  margin: 0 0 var(--space-sm);
  padding-bottom: var(--space-xs);
  border-bottom: 1px solid var(--border);
}
.toc-nav {
  display: flex;
  flex-direction: column;
}
.toc-link {
  display: block;
  font-size: .78rem;
  color: var(--text3);
  padding: .3em 0 .3em .7em;
  line-height: 1.4;
  border-left: 2px solid transparent;
  text-decoration: none;
  transition: color .2s, border-color .2s;
  white-space: normal;
  word-break: break-word;
}
.toc-link:hover { color: var(--accent); border-color: var(--accent); }
.toc-level-3 { padding-left: 1.4em; font-size: .72rem; }

/* ── Right Sidebar Widgets ── */
.post-sidebar-col {
  position: sticky;
  top: clamp(60px, 7vh, 88px);
  display: flex;
  flex-direction: column;
  gap: var(--space-lg);
}
.sidebar-widget {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: var(--space-md);
  display: flex;
  flex-direction: column;
  gap: var(--space-sm);
}
.sidebar-section-label {
  font-size: .68rem;
  font-weight: 700;
  letter-spacing: .12em;
  text-transform: uppercase;
  color: var(--text3);
  padding-bottom: var(--space-xs);
  border-bottom: 1px solid var(--border);
  margin-bottom: var(--space-xs);
}
.sidebar-post-card {
  display: flex;
  gap: var(--space-sm);
  align-items: flex-start;
  padding: var(--space-xs) 0;
  border-bottom: 1px solid var(--border);
  transition: opacity .2s;
  text-decoration: none;
  color: inherit;
}
.sidebar-post-card:last-child { border-bottom: none; }
.sidebar-post-card:hover { opacity: .8; }
.sidebar-post-thumb {
  flex-shrink: 0;
  width: clamp(52px, 5.5vw, 72px);
  height: clamp(36px, 3.8vw, 50px);
  border-radius: var(--radius-sm);
  overflow: hidden;
  background: var(--surface2);
}
.sidebar-post-thumb img { width: 100%; height: 100%; object-fit: cover; }
.sidebar-post-info { display: flex; flex-direction: column; gap: .2em; min-width: 0; }
.sidebar-post-tag {
  font-size: .65rem;
  font-weight: 700;
  letter-spacing: .1em;
  text-transform: uppercase;
  background: var(--hero-grad);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  display: inline-block;
}
.sidebar-post-title {
  font-size: var(--text-xs);
  font-weight: 600;
  line-height: 1.4;
  color: var(--text);
  display: -webkit-box;
  -webkit-line-clamp: 2;
  -webkit-box-orient: vertical;
  overflow: hidden;
}
.sidebar-post-date {
  font-size: .68rem;
  color: var(--text3);
}

/* ── Inline body links ── */
.body-link {
  color: var(--accent);
  text-decoration: underline;
  text-underline-offset: 3px;
  text-decoration-color: rgba(249,115,22,.4);
  transition: color .15s, text-decoration-color .15s;
}
.body-link:hover {
  color: var(--accent-hover);
  text-decoration-color: var(--accent);
}
.inline-code {
  font-family: var(--font-mono);
  background: var(--code-bg);
  color: var(--code-fg);
  padding: .15em .45em;
  border-radius: var(--radius-sm);
  font-size: .87em;
  border: 1px solid var(--border);
}

/* ── Code blocks (react-syntax-highlighter) ── */
.code-block-wrapper {
  margin: var(--space-md) 0;
  border-radius: var(--radius);
  border: 1px solid var(--border);
  overflow: hidden;
}
.code-lang {
  background: #1e1e2e;
  color: var(--text3);
  font-size: .7rem;
  font-weight: 700;
  letter-spacing: .1em;
  text-transform: uppercase;
  padding: .4em var(--space-md);
  border-bottom: 1px solid var(--border);
}
.code-block-wrapper pre { margin: 0 !important; border-radius: 0 !important; }

/* ─────────────────────────────────────────────────────
   RESPONSIVE
───────────────────────────────────────────────────── */
@media (max-width: 1100px) {
  .post-layout {
    grid-template-columns: 1fr clamp(180px, 22vw, 240px);
    grid-template-areas: "content sidebar";
  }
  .post-toc-col { display: none; }
}
@media (max-width: 768px) {
  .social-sidebar { display: none; }
  .post-featured { grid-template-columns: 1fr; }
  .post-featured-image { aspect-ratio: 16/9; }
  .posts-grid { grid-template-columns: 1fr; }
  .post-hero-section { aspect-ratio: 16/9; }
  .post-layout {
    grid-template-columns: 1fr;
    grid-template-areas: "content" "sidebar";
  }
  .post-sidebar-col { position: static; }
}